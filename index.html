<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Nexus.x | Soluções Digitais</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        /* --- ESTILOS IDÊNTICOS AO ANTERIOR (Mantendo a identidade visual) --- */
        :root {
            --bg-color: #050505;
            --card-bg: rgba(20, 20, 20, 0.8);
            --primary-purple: #b06bf9;
            --primary-glow: rgba(176, 107, 249, 0.4);
            --text-white: #ffffff;
            --text-gray: #b3b3b3;
            --border-glass: rgba(255, 255, 255, 0.1);
            --star-gold: #FFD700;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Poppins', sans-serif; scroll-behavior: smooth; }
        body { background-color: var(--bg-color); color: var(--text-white); overflow-x: hidden; background-image: radial-gradient(circle at 10% 20%, rgba(118, 0, 255, 0.15) 0%, transparent 20%), radial-gradient(circle at 90% 80%, rgba(118, 0, 255, 0.1) 0%, transparent 20%); }
        
        /* Header & Hero */
        header { padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; backdrop-filter: blur(10px); position: fixed; width: 100%; top: 0; z-index: 1000; border-bottom: 1px solid var(--border-glass); }
        .logo { font-size: 1.5rem; font-weight: 700; color: var(--text-white); letter-spacing: 1px; }
        .logo span { color: var(--primary-purple); }
        .hero { height: 100vh; min-height: 600px; display: flex; flex-direction: column; justify-content: center; align-items: center; text-align: center; padding: 0 20px; position: relative; }
        .hero h1 { font-size: 3.5rem; line-height: 1.2; margin-bottom: 20px; background: linear-gradient(to right, #fff, var(--primary-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; max-width: 800px; }
        .hero p { font-size: 1.2rem; color: var(--text-gray); margin-bottom: 40px; max-width: 600px; }
        .cta-button { background: var(--primary-purple); color: #000; padding: 18px 40px; font-size: 1.1rem; font-weight: 700; text-decoration: none; border-radius: 50px; box-shadow: 0 0 20px var(--primary-glow); transition: all 0.3s ease; text-transform: uppercase; letter-spacing: 1px; border: 2px solid var(--primary-purple); animation: pulse 2s infinite; cursor: pointer; }
        .cta-button:hover { background: transparent; color: var(--primary-purple); box-shadow: 0 0 40px var(--primary-glow); }
        
        /* Sections */
        section { padding: 80px 5%; }
        .section-title { text-align: center; font-size: 2.5rem; margin-bottom: 60px; }
        .section-title span { color: var(--primary-purple); border-bottom: 2px solid var(--primary-purple); }
        
        /* Services */
        .services-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; }
        .service-card { background: var(--card-bg); padding: 40px; border-radius: 16px; border: 1px solid var(--border-glass); transition: transform 0.3s ease; }
        .service-card:hover { transform: translateY(-10px); border-color: var(--primary-purple); }
        .service-icon { font-size: 2.5rem; color: var(--primary-purple); margin-bottom: 20px; }
        .service-card h3 { margin-bottom: 15px; font-size: 1.5rem; }
        .service-card p { color: var(--text-gray); font-size: 0.95rem; line-height: 1.6; }

        /* Pricing */
        .pricing { background: linear-gradient(180deg, var(--bg-color) 0%, #0f0f0f 100%); }
        .pricing-grid { display: flex; justify-content: center; flex-wrap: wrap; gap: 30px; }
        .plan-card { background: var(--card-bg); border: 1px solid var(--border-glass); border-radius: 20px; padding: 30px; width: 320px; display: flex; flex-direction: column; position: relative; transition: all 0.3s ease; }
        .plan-card:hover { box-shadow: 0 10px 30px rgba(176, 107, 249, 0.15); border-color: var(--primary-purple); transform: translateY(-5px); }
        .plan-header h3 { font-size: 1.4rem; color: var(--primary-purple); margin-bottom: 15px; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 10px; }
        .plan-price { font-size: 1.5rem; color: var(--text-white); margin-bottom: 10px; font-weight: bold; }
        .price-details { font-size: 0.85rem; color: #ccc; margin-bottom: 20px; }
        .required { color: #ff6b6b; font-weight: bold; }
        .optional { color: #4ecdc4; font-weight: bold; }
        .plan-features { list-style: none; margin-top: 10px; }
        .plan-features li { margin-bottom: 12px; color: var(--text-gray); font-size: 0.9rem; border-bottom: 1px solid rgba(255,255,255,0.05); padding-bottom: 8px; }
        .plan-features li strong { color: #fff; display: block; font-size: 0.95rem; margin-bottom: 2px; }

        /* Reviews Section Real */
        .reviews { background-color: #0a0a0a; }
        .reviews-container { max-width: 800px; margin: 0 auto; }
        .reviews-header { display: flex; align-items: center; justify-content: center; margin-bottom: 40px; background: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid var(--border-glass); }
        .average-score { font-size: 3rem; font-weight: 700; color: var(--text-white); margin-right: 15px; }
        .average-stars { color: var(--star-gold); font-size: 1.5rem; margin-bottom: 5px; }
        .total-reviews { color: var(--text-gray); font-size: 0.9rem; }
        
        .review-list { display: flex; flex-direction: column; gap: 20px; margin-bottom: 50px; min-height: 50px; }
        .review-item { background: var(--card-bg); padding: 20px; border-radius: 12px; border: 1px solid var(--border-glass); animation: fadeIn 0.5s ease; }
        .review-user { display: flex; justify-content: space-between; margin-bottom: 10px; }
        .review-author { font-weight: bold; color: var(--primary-purple); }
        .review-stars-static { color: var(--star-gold); }
        .review-text { color: var(--text-gray); font-size: 0.95rem; font-style: italic; }
        .no-reviews-msg { text-align: center; color: var(--text-gray); font-style: italic; padding: 20px; }

        .review-form-box { background: var(--card-bg); padding: 30px; border-radius: 16px; border: 1px solid var(--primary-purple); }
        .review-form-box h3 { text-align: center; margin-bottom: 20px; color: var(--text-white); }
        
        .star-rating-input { display: flex; flex-direction: row-reverse; justify-content: center; margin-bottom: 20px; }
        .star-rating-input input { display: none; }
        .star-rating-input label { font-size: 2rem; color: #444; cursor: pointer; padding: 0 5px; transition: color 0.2s; }
        .star-rating-input input:checked ~ label, .star-rating-input label:hover, .star-rating-input label:hover ~ label { color: var(--star-gold); }

        .review-textarea { width: 100%; background: rgba(0,0,0,0.3); border: 1px solid var(--border-glass); border-radius: 8px; padding: 15px; color: var(--text-white); resize: vertical; min-height: 100px; margin-bottom: 20px; }
        .review-textarea:focus { outline: none; border-color: var(--primary-purple); }
        
        .submit-review-btn { width: 100%; padding: 15px; background: transparent; color: var(--primary-purple); border: 2px solid var(--primary-purple); border-radius: 50px; font-weight: bold; cursor: pointer; transition: 0.3s; }
        .submit-review-btn:hover { background: var(--primary-purple); color: #000; }
        .submit-review-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Footer */
        footer { padding: 50px 5%; text-align: center; border-top: 1px solid var(--border-glass); }
        .footer-content h4 { font-size: 1.5rem; margin-bottom: 20px; }
        .social-links a { color: var(--text-white); font-size: 1.5rem; margin: 0 15px; transition: color 0.3s; }
        .social-links a:hover { color: var(--primary-purple); }
        .contact-info { margin-top: 20px; color: var(--text-gray); }

        @media (max-width: 768px) { .hero h1 { font-size: 2.2rem; } .pricing-grid { flex-direction: column; align-items: center; } .plan-card { width: 100%; } }
        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(176, 107, 249, 0.7); } 70% { box-shadow: 0 0 0 15px rgba(176, 107, 249, 0); } 100% { box-shadow: 0 0 0 0 rgba(176, 107, 249, 0); } }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <div class="logo">THE NEXUS<span>.X</span></div>
    </header>

    <section class="hero">
        <h1>Transforme o Digital na Sua Maior Vantagem Competitiva</h1>
        <p>Desenvolvimento Web, Inteligência de Dados e Gestão de Mídia. Tudo o que sua empresa precisa para liderar o mercado, em um só lugar.</p>
        <a href="https://api.whatsapp.com/send/?phone=5511911888915&text&type=phone_number&app_absent=0" target="_blank" class="cta-button">Falar com Especialista <i class="fab fa-whatsapp"></i></a>
    </section>

    <section class="services">
        <div class="section-title"><h2>Nossas <span>Soluções</span></h2></div>
        <div class="services-grid">
            <div class="service-card"><i class="fas fa-laptop-code service-icon"></i><h3>Landing Pages</h3><p>Sites desenvolvidos estrategicamente para vender. Foco total em transformar visitantes em clientes.</p></div>
            <div class="service-card"><i class="fas fa-chart-line service-icon"></i><h3>Planilhas & Dashboards</h3><p>Transforme dados em decisões. Planilhas personalizadas e Dashboards Automáticos (BI).</p></div>
            <div class="service-card"><i class="fab fa-instagram service-icon"></i><h3>Gestão de Instagram</h3><p>Criamos flyers, vídeos e stories que engajam seu público e fortalecem sua marca.</p></div>
        </div>
    </section>

    <section class="pricing">
        <div class="section-title"><h2>Escolha seu <span>Plano</span></h2></div>
        <div class="pricing-grid">
            <div class="plan-card"><div class="plan-header"><h3>Plano Site</h3><div class="plan-price">R$ 399,90 <span style="font-size:0.8rem; font-weight:normal">(Único)</span></div><div class="price-details required">+ Taxa Adm R$ 59,90/mês (Obrigatório)</div></div><ul class="plan-features"><li><strong>Landing Page Completa</strong>Focada em vendas.</li><li><strong>Conteúdo</strong>Apresentação, Banner e Catálogo.</li><li><strong>Social</strong>Área de feedbacks.</li></ul></div>
            <div class="plan-card"><div class="plan-header"><h3>Planilha Silver</h3><div class="plan-price">R$ 99,90 <span style="font-size:0.8rem; font-weight:normal">(Único)</span></div><div class="price-details optional">+ Taxa R$ 9,90/mês (Opcional)</div></div><ul class="plan-features"><li><strong>Planilhas Prontas</strong>Controle de gastos e outros.</li><li><strong>Personalização</strong>Ajustes simples.</li></ul></div>
            <div class="plan-card"><div class="plan-header"><h3>Planilha Gold</h3><div class="plan-price">R$ 299,90 <span style="font-size:0.8rem; font-weight:normal">(Único)</span></div><div class="price-details optional">+ Taxa R$ 19,90/mês (Opcional)</div></div><ul class="plan-features"><li><strong>Tudo do Silver</strong>Planilhas prontas e personalização.</li><li><strong>Dashboard Automático (BI)</strong>Painéis gráficos inteligentes.</li><li><strong>Atualização Automática</strong>Dados em tempo real.</li></ul></div>
            <div class="plan-card"><div class="plan-header"><h3>Mkt Silver</h3><div class="plan-price">R$ 99,90 <span style="font-size:0.8rem; font-weight:normal">/mês</span></div><div class="price-details">Recorrência Mensal</div></div><ul class="plan-features"><li><strong>5 Flyers Digitais</strong>Artes para Feed.</li><li><strong>2 Vídeos Curtos</strong>Animações.</li><li><strong>5 Stories Atrativos</strong>Pacote semanal.</li></ul></div>
            <div class="plan-card"><div class="plan-header"><h3>Mkt Gold</h3><div class="plan-price">R$ 149,90 <span style="font-size:0.8rem; font-weight:normal">/mês</span></div><div class="price-details">Recorrência Mensal</div></div><ul class="plan-features"><li><strong>10 Flyers Digitais</strong>O dobro de conteúdo.</li><li><strong>5 Vídeos Curtos</strong>Animações.</li><li><strong>10 Stories Atrativos</strong>Pacote semanal.</li></ul></div>
        </div>
    </section>

    <section class="reviews" id="reviews-section">
        <div class="section-title"><h2>O que dizem nossos <span>Clientes</span></h2></div>
        <div class="reviews-container">
            <div class="reviews-header">
                <div class="average-score" id="avg-score-display">-.-</div>
                <div>
                    <div class="average-stars" id="avg-stars-display"></div>
                    <div class="total-reviews" id="total-reviews-display">Carregando avaliações...</div>
                </div>
            </div>

            <div class="review-list" id="review-list">
                </div>

            <div class="review-form-box">
                <h3>Deixe sua Avaliação</h3>
                <form id="review-form">
                    <div class="star-rating-input">
                        <input type="radio" id="star5" name="rating" value="5" required /><label for="star5" title="5 estrelas"><i class="fas fa-star"></i></label>
                        <input type="radio" id="star4" name="rating" value="4" /><label for="star4" title="4 estrelas"><i class="fas fa-star"></i></label>
                        <input type="radio" id="star3" name="rating" value="3" /><label for="star3" title="3 estrelas"><i class="fas fa-star"></i></label>
                        <input type="radio" id="star2" name="rating" value="2" /><label for="star2" title="2 estrelas"><i class="fas fa-star"></i></label>
                        <input type="radio" id="star1" name="rating" value="1" /><label for="star1" title="1 estrela"><i class="fas fa-star"></i></label>
                    </div>
                    <input type="text" id="reviewer-name" placeholder="Seu Nome (Opcional)" style="width:100%; padding:10px; margin-bottom:10px; background:rgba(0,0,0,0.3); border:1px solid var(--border-glass); color:white; border-radius:8px;">
                    <textarea class="review-textarea" id="review-comment" placeholder="Compartilhe sua experiência conosco..." required></textarea>
                    <button type="submit" class="submit-review-btn" id="submit-btn">Enviar Avaliação</button>
                </form>
            </div>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <h4 class="logo">THE NEXUS<span>.X</span></h4>
            <div class="social-links"><a href="https://instagram.com/thenexus.x" target="_blank"><i class="fab fa-instagram"></i></a><a href="mailto:thenexus.xy@gmail.com"><i class="fas fa-envelope"></i></a></div>
            <div class="contact-info"><p>thenexus.xy@gmail.com</p><p>&copy; 2024 The Nexus.x. Todos os direitos reservados.</p></div>
        </div>
    </footer>

    <script type="module">
        // Importa as funções necessárias do Firebase
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- ⚠️ AQUI VOCÊ COLA AS SUAS CONFIGURAÇÕES DO FIREBASE ---
        const firebaseConfig = {
            apiKey: "AIzaSyA0-5ORbtzAPCK_Vyou0bQRL9zqyTZXAmQ",
            authDomain: "the-nexusx.firebaseapp.com",
            projectId: "the-nexusx",
            storageBucket: "the-nexusx.firebasestorage.app",
            messagingSenderId: "3352943436",
            appId: "1:3352943436:web:26c632fd4f16403b7c0de9",
	    measurementId: "G-6BMJ0W3W6P"
        };
        // -----------------------------------------------------------

        // Inicializa o Banco de Dados
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const reviewsCollection = collection(db, "reviews");

        // Elementos do DOM
        const reviewForm = document.getElementById('review-form');
        const reviewList = document.getElementById('review-list');
        const avgScoreDisplay = document.getElementById('avg-score-display');
        const totalReviewsDisplay = document.getElementById('total-reviews-display');
        const avgStarsDisplay = document.getElementById('avg-stars-display');
        const submitBtn = document.getElementById('submit-btn');

        // FUNÇÃO 1: ESCUTAR O BANCO DE DADOS EM TEMPO REAL
        // Sempre que alguém comentar, isso atualiza a tela automaticamente
        const q = query(reviewsCollection, orderBy("timestamp", "desc"));
        
        onSnapshot(q, (snapshot) => {
            reviewList.innerHTML = ""; // Limpa a lista atual
            let totalScore = 0;
            let totalCount = 0;

            if (snapshot.empty) {
                reviewList.innerHTML = '<p class="no-reviews-msg">Seja o primeiro a avaliar a The Nexus.x!</p>';
                avgScoreDisplay.textContent = "0.0";
                totalReviewsDisplay.textContent = "Sem avaliações ainda";
                avgStarsDisplay.innerHTML = generateStars(0);
                return;
            }

            // Loop para processar cada avaliação salva
            snapshot.forEach((doc) => {
                const data = doc.data();
                totalScore += data.rating;
                totalCount++;

                // Cria o HTML do review
                const reviewItem = document.createElement('div');
                reviewItem.classList.add('review-item');
                reviewItem.innerHTML = `
                    <div class="review-user">
                        <span class="review-author">${data.name || "Cliente Anônimo"}</span>
                        <div class="review-stars-static">
                            ${generateStars(data.rating)}
                        </div>
                    </div>
                    <p class="review-text">"${data.comment}"</p>
                `;
                reviewList.appendChild(reviewItem);
            });

            // Atualiza a média
            const average = (totalScore / totalCount).toFixed(1);
            avgScoreDisplay.textContent = average;
            totalReviewsDisplay.textContent = `Baseado em ${totalCount} avaliações`;
            avgStarsDisplay.innerHTML = generateStars(Math.round(average));
        });

        // FUNÇÃO 2: ENVIAR DADOS PARA O BANCO (SALVAR)
        reviewForm.addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const ratingInput = document.querySelector('input[name="rating"]:checked');
            const commentInput = document.getElementById('review-comment');
            const nameInput = document.getElementById('reviewer-name');

            if (!ratingInput) { alert("Selecione uma estrela!"); return; }

            // Bloqueia botão para evitar clique duplo
            submitBtn.disabled = true;
            submitBtn.textContent = "Enviando...";

            try {
                // Salva no Firestore
                await addDoc(reviewsCollection, {
                    name: nameInput.value || "Anônimo",
                    rating: parseInt(ratingInput.value),
                    comment: commentInput.value,
                    timestamp: serverTimestamp() // Salva a hora exata do servidor
                });

                // Limpa formulário
                reviewForm.reset();
                alert("Avaliação enviada com sucesso!");
            } catch (error) {
                console.error("Erro ao salvar:", error);
                alert("Erro ao enviar avaliação. Tente novamente.");
            } finally {
                submitBtn.disabled = false;
                submitBtn.textContent = "Enviar Avaliação";
            }
        });

        // Auxiliar: Gerar estrelas visuais
        function generateStars(rating) {
            let starsHtml = '';
            for (let i = 1; i <= 5; i++) {
                if (i <= rating) starsHtml += '<i class="fas fa-star"></i>';
                else starsHtml += '<i class="far fa-star"></i>';
            }
            return starsHtml;
        }
    </script>

</body>
</html>